<div class="p-4">
  <h1 class="text-4xl font-extrabold mb-8 text-green-400 text-center">Your Top Tracks</h1>

  @if (topTracks().length > 0) {
    <mat-card class="bg-gray-800 text-gray-100 shadow-xl rounded-lg overflow-hidden">
      <mat-card-content class="p-0">
        <div class="overflow-x-auto">
          <table mat-table [dataSource]="topTracks()" class="w-full text-gray-200">
            <!-- Position Column -->
            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef class="text-left py-4 px-6 text-lg font-semibold border-b border-gray-700"> # </th>
              <td mat-cell *matCellDef="let track; let i = index" class="py-4 px-6 border-b border-gray-700"> {{ i + 1 }} </td>
            </ng-container>

            <!-- Cover Art Column -->
            <ng-container matColumnDef="coverArt">
              <th mat-header-cell *matHeaderCellDef class="text-left py-4 px-6 text-lg font-semibold border-b border-gray-700"> </th>
              <td mat-cell *matCellDef="let track" class="py-4 px-6 border-b border-gray-700">
                <img [src]="track.coverArt" alt="{{ track.title }}" class="w-12 h-12 rounded shadow-md object-cover">
              </td>
            </ng-container>

            <!-- Title Column -->
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef class="text-left py-4 px-6 text-lg font-semibold border-b border-gray-700"> Title </th>
              <td mat-cell *matCellDef="let track" class="py-4 px-6 border-b border-gray-700 font-medium text-white"> {{ track.title }} </td>
            </ng-container>

            <!-- Artist Column -->
            <ng-container matColumnDef="artist">
              <th mat-header-cell *matHeaderCellDef class="text-left py-4 px-6 text-lg font-semibold border-b border-gray-700"> Artist </th>
              <td mat-cell *matCellDef="let track" class="py-4 px-6 border-b border-gray-700 text-gray-400"> {{ track.artist }} </td>
            </ng-container>

            <!-- Album Column -->
            <ng-container matColumnDef="album">
              <th mat-header-cell *matHeaderCellDef class="text-left py-4 px-6 text-lg font-semibold border-b border-gray-700"> Album </th>
              <td mat-cell *matCellDef="let track" class="py-4 px-6 border-b border-gray-700 text-gray-400"> {{ track.album }} </td>
            </ng-container>

            <!-- Play Count Column -->
            <ng-container matColumnDef="playCount">
              <th mat-header-cell *matHeaderCellDef class="text-left py-4 px-6 text-lg font-semibold border-b border-gray-700"> Play Count </th>
              <td mat-cell *matCellDef="let track" class="py-4 px-6 border-b border-gray-700 text-green-400 font-semibold"> {{ track.playCount | number }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-700 transition-colors duration-150"></tr>
          </table>
        </div>
      </mat-card-content>
    </mat-card>
  } @else {
    <div class="flex justify-center items-center h-64">
      <p class="text-xl text-gray-400">Loading top tracks...</p>
    </div>
  }
</div>
